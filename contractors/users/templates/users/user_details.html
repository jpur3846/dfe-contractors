{% extends "user_template.html" %}

{% block pagetitle %}
DFE | Edit User Details
{% endblock %}


{% block written-title %}
    <h3>Edit your details</h3>
{% endblock %}

{% block user-body %}

    {% block add-message %}
    {% endblock %}

    <!-- ERRORS -->
    {% for field in form %}
    {% if field.errors %}
        <p class="alert alert-danger" style="width: 100%; max-width: 100%;">{{ field.errors|striptags }}</p>
        {% endif %}
    {% endfor %}
    {% for field in profile_form %}
    {% if field.errors %}
        <p class="alert alert-danger">{{ field.errors|striptags }}</p>
    {% endif %}
    {% endfor %}

    <!--Right column for gig list.-->
    <div class="container d-flex justify-content-center">
        <form method="POST" action="{% url 'user_details' %}" enctype='multipart/form-data' style="width: 90%; max-width: 1000px;">
            {% csrf_token %}
                
        <br>
        <div class="container">
            <div class="row border-bottom mb-2">
                <h5>Account Details </h5>
            </div>
            <br>
            <div class="row">
                <div class="col-md pb-3">
                    <label>Log-in Email</label>
                    {{ form.email }}
                </div>
                <div class="col-md pb-3">
                    <label>First Name</label>
                    {{ form.first_name }}
                </div>
                <div class="col-md pb-3">
                    <label>Last Name</label>
                    {{ form.last_name }}
                </div>
                
                <div class="col-md pb-3">
                    <label>Profile Picture</label>
                    <br>
                    <img src='{{ request.user.contractor.profile_picture.url }}' class='img-thumbnail' style="max-height: 200px;">
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row border-bottom mb-2 pt-4">
                <h5>Personal Details </h5>
            </div>
            <div class="row">
                <div class="col-md pb-3">
                        <label>Phone Number</label>
                        {{ profile_form.phone_number }}
                </div>
                <div class="col-md pb-3">
                    <label>City</label>
                    {{ profile_form.city }}
                </div>
                <div class="col-md pb-3">
                    <label>State</label>
                    {{ profile_form.state }}
                    <br>
                </div>
                <div class="col-md pb-3">
                    <label>Profile Picture</label>
                    <br>
                    {{ profile_form.profile_picture }}
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row border-bottom mb-2 pt-4">
                <h5>Financial Details </h5>
            </div>
                <div class="row">
                    <div class='col-md pb-3'>
                        <label>ABN</label>
                        {{ profile_form.abn }}
                    </div>
                    <div class='col-md pb-3'>
                        <label>GST Status</label>
                        {{ profile_form.gst_status }}
                    </div>
                    <div class='col-md pb-3'>
                        <label>Bank Account Name</label>
                        {{ profile_form.account_name }}
                    </div>
                    <div class='col-md pb-3'>
                        <label>BSB</label>
                        {{ profile_form.bsb }}
                    </div>
                    <div class='col-md pb-3'>
                        <label>Account Number</label>
                        {{ profile_form.account_number }}
                    </div>
                </div>
        </div>

        <div class="container">
            <div class="row border-bottom mb-2 pt-4">
                <h5>Musical/Work Details </h5>
            </div>

            <div class="row">
                <div class="col-md pb-3">
                    <label>Main Instrument</label>
                    {{ profile_form.main_instrument }}
                </div>
                <div class="col-md pb-3">
                    <label>Secondary Instrument</label>
                    {{ profile_form.secondary_instrument }}
                </div>
                <div class="col-md pb-3"> 
                    <label>Other Instruments</label>
                    {{ profile_form.other_instruments }}
                </div>         
            </div>
            <div class="row">
                <div class="col-md pb-3">
                    <label>Meal Preference</label>
                    {{ profile_form.meal_preference }}
                </div>
                <div class="col-md pb-3">
                    <label>Can you provide a PA?</label>
                    {{ profile_form.pa_system }}
                </div>
                <div class="col-md pb-3"> 
                    <label>Can you provide a battery amp?</label>
                    {{ profile_form.battery_amp }}
                </div>         
            </div>
            <div class="row">
                <div class="col-md pb-3">
                    <label>Public Liability Insurance</label>
                    {{ profile_form.public_liability }}
                </div>
                <div class="col-md pb-3">
                    <label>Can you comfortably MC?</label>
                    {{ profile_form.can_mc }}
                </div>
                <div class="col-md pb-3"> 
                    <label>Car Number Plate</label>
                    {{ profile_form.number_plate }}
                </div>         
            </div>
            <div class="row">
                    <div class="col-md pb-3">
                        <label>If you DJ, can you accept on-the-spot requests?</label>
                        {{profile_form.accept_on_spot_requests }}
                    </div>
                    <div class="col-md pb-3">
                        <label>Are you a Sydney Conservatorium Alumni?</label>
                        {{ profile_form.alumni }}
                    </div>
                    <div class="col-md pb-3">
                        <label>If so, what year did you finish?</label>
                        {{ profile_form.year_finished }}
                    </div>         
            </div>
            <br>

            <button class="btn btn-lg btn-dark btn-block" type="Submit">Save Changes</button>
            </div>
            <br>
        </div>
        </form>
    </div>
{% endblock %}